---
title: 아티클 리뷰 - CAP 이론과 분산 시스템의 이해
date: 2025-04-21
tags: 항해99, 분산시스템, CAP이론, 데이터베이스, 1일1아티클
draft: false
enableToc: true
description: CAP 이론의 핵심 개념과 분산 시스템에서의 트레이드오프에 대한 아티클을 읽고 리뷰한다.
published: 2025-04-21
modified: 2025-04-21
---

> [!summary]
>
> 이 글은 IBM의 "What is the CAP theorem?" 아티클에 대한 리뷰이다. 원문에서는 분산 시스템에서 일관성(Consistency), 가용성(Availability), 분할 허용성(Partition tolerance) 중 동시에 두 가지만 제공할 수 있다는 CAP 이론의 핵심 개념과 실제 데이터베이스 시스템에서의 적용을 설명하고 있다. 이 리뷰에서는 특히 "Cheap, Fast, and Good: Pick Two"라는 비유를 통해 복잡한 개념을 이해하기 쉽게 설명한 접근 방식을 높이 평가하고, CP 데이터베이스인 MongoDB와 AP 데이터베이스인 Cassandra의 특성을 비교하며, 마이크로서비스 아키텍처에서의 데이터베이스 선택에 대한 저자의 관점을 공유한다.

> [!info]
> 이 글은 [[항해99 1일 1아티클 챌린지|항해99 1일 1아티클 챌린지]] 참여 글입니다.
> - [챌린지 페이지 바로가기](https://99clubarticle.vercel.app/)
> - [챌린지 소개 페이지](https://hanghae99.spartacodingclub.kr/99club-1day1study)
> - 원본 아티클: [What is the CAP theorem?](https://www.ibm.com/think/topics/cap-theorem)


### 들어가며

이 리뷰에서는 IBM에서 발행한 CAP 이론에 관한 기술 아티클을 살펴본다. 원문은 분산 시스템이 가진 세 가지 주요 특성(일관성, 가용성, 분할 허용성) 간의 불가피한 트레이드오프를 설명하고 있으며, 특히 클라우드 기반 애플리케이션을 개발할 때 이 이론을 이해하는 것이 얼마나 중요한지를 강조하고 있다.

### 인상 깊었던 한 줄

> "Cheap, Fast, and Good: Pick Two"(저렴하고, 빠르고, 좋은 품질: 둘을 선택하세요)

이 문구는 리뷰하는 아티클에서 CAP 이론을 소개하는 부분에 사용된 비유이다. 일상에서 볼 수 있는 건설업자나 서비스 제공자들의 광고에서 자주 사용되는 이 문구를 통해, 복잡한 분산 시스템 이론을 이해하기 쉽게 설명하려는 시도가 인상적이었다. 

이 문장이 특히 인상 깊었던 이유는, 매우 기술적이고 복잡한 개념을 누구나 경험해본 일상적인 상황에 비유함으로써 직관적인 이해를 돕고 있기 때문이다. 소프트웨어 엔지니어링에서는 종종 이런 트레이드오프 관계가 발생하지만, 이를 명확하게 인식하고 상황에 맞는 최적의 선택을 하는 것이 중요하다는 점을 상기시켜준다.

내가 개발 프로젝트를 진행할 때도 항상 비슷한 트레이드오프 상황에 직면한다. 빠르게 개발하면서도 품질 높은 코드를 작성하려 하지만, 때로는 두 가지를 모두 만족시키기 어려울 때가 있다. 이런 상황에서 프로젝트의 목적과 상황에 맞게 우선순위를 정하고 의사결정을 내리는 것이 중요하다는 점을, 이 간단한 비유가 효과적으로 상기시켜 주었다.

> "MongoDB is a CP data store—it resolves network partitions by maintaining consistency, while compromising on availability."

리뷰하는 아티클의 이 문장은 MongoDB가 CAP 이론의 관점에서 CP(일관성과 분할 허용성) 데이터 스토어라는 특성을 명확히 설명하고 있다. MongoDB에서는 네트워크 파티션이 발생했을 때 데이터 일관성을 유지하기 위해 가용성을 희생한다는 사실이 직접적으로 표현되어 있다.

이 문장이 눈에 띈 이유는 실제 데이터베이스 시스템이 CAP 이론을 어떻게 구현하고 있는지 구체적인 예시를 통해 보여주기 때문이다. 추상적인 이론이 아닌, 실무에서 널리 사용되는 기술에 이론이 어떻게 적용되는지 보여줌으로써 CAP 이론의 실질적인 중요성을 강조하고 있다.

나는 최근 프로젝트에서 MongoDB를 사용한 경험이 있는데, 당시에는 CAP 이론의 관점에서 깊이 생각해보지 않았다. 이 아티클을 리뷰하면서 MongoDB의 설계 철학과 작동 방식이 왜 그러한지 더 명확하게 이해하게 되었다. 특히 레플리카 세트에서 프라이머리 노드가 사용 불가능해졌을 때 새로운 프라이머리 노드가 선출되는 과정에서 일시적으로 쓰기 작업이 불가능해지는 현상이 왜 발생하는지 CAP 이론의 관점에서 이해할 수 있게 되었다.

### 아티클이 설명하는 CAP 이론의 핵심 개념

리뷰하는 아티클에 따르면, CAP 이론은 2000년 Eric A. Brewer 교수가 분산 컴퓨팅에 관한 강연에서 처음 제시했으며, 2년 후 MIT의 Seth Gilbert와 Nancy Lynch 교수가 이를 수학적으로 증명했다고 한다. 이 이론은 분산 시스템이 다음 세 가지 특성을 동시에 모두 제공할 수 없다고 말한다:

1. **일관성(Consistency)**: 모든 클라이언트가 같은 시간에 동일한 데이터를 볼 수 있어야 한다. 한 노드에 데이터가 쓰여지면, 그 쓰기가 성공했다고 간주되기 전에 모든 다른 노드에 즉시 복제되어야 한다.

2. **가용성(Availability)**: 하나 이상의 노드가 다운되더라도 모든 클라이언트가 데이터에 대한 응답을 받을 수 있어야 한다. 다시 말해, 작동 중인 모든 노드는 예외 없이 모든 요청에 대해 유효한 응답을 반환해야 한다.

3. **분할 허용성(Partition tolerance)**: 분할은 분산 시스템 내의 통신 단절을 의미한다. 분할 허용성은 두 노드 간에 통신 문제가 발생하더라도 시스템이 계속 작동해야 함을 의미한다.

아티클에서는 현실적으로 분산 시스템에서는 분할(네트워크 단절)이 불가피하기 때문에, 실제로는 일관성과 가용성 중 하나를 선택해야 한다고 설명한다. 이에 따라 NoSQL 데이터베이스는 다음과 같이 분류된다:

- **CP 데이터베이스**: 일관성과 분할 허용성을 제공하지만 가용성을 희생한다. 분할이 발생하면 일관성이 없는 노드를 사용 불가능하게 만들어 일관성을 유지한다.
- **AP 데이터베이스**: 가용성과 분할 허용성을 제공하지만 일관성을 희생한다. 분할이 발생하면 모든 노드가 계속 사용 가능하지만, 일부 노드는 다른 노드보다 오래된 버전의 데이터를 반환할 수 있다.
- **CA 데이터베이스**: 이론상으로는 일관성과 가용성을 제공하지만, 현실적으로 분산 시스템에서는 분할을 피할 수 없기 때문에 실제로는 존재할 수 없다.

아티클의 이 부분은 CAP 이론의 기본 개념을 매우 명확하게 설명하고 있어 이론을 처음 접하는 사람도 쉽게 이해할 수 있다고 생각한다.

### 아티클에서 다룬 실제 데이터베이스와 CAP 이론

리뷰하는 아티클에서는 MongoDB와 Cassandra를 예로 들어 CAP 이론이 실제 데이터베이스 시스템에 어떻게 적용되는지 설명하고 있다:

**MongoDB (CP 데이터베이스)**
MongoDB는 단일 마스터 시스템으로, 각 레플리카 세트는 하나의 프라이머리 노드만 가질 수 있고 이 노드가 모든 쓰기 작업을 처리한다. 프라이머리 노드가 사용 불가능해지면, 새로운 프라이머리 노드가 선출될 때까지 클라이언트는 쓰기 요청을 할 수 없다. 이 방식은 데이터 일관성은 유지하지만, 일시적으로 가용성을 희생한다.

**Cassandra (AP 데이터베이스)**
반면 Cassandra는 마스터리스 아키텍처를 가지고 있어 모든 노드가 계속 사용 가능해야 한다. Cassandra는 클라이언트가 언제든지 어떤 노드에도 쓸 수 있게 허용하고, 불일치가 발생하면 가능한 빨리 해결하는 방식으로 "결과적 일관성(eventual consistency)"을 제공한다. 이러한 접근 방식은 일관성을 일부 희생하는 대신 지속적인 가용성을 제공한다.

이 부분에서 아티클은 실제 사용되는 데이터베이스 시스템을 예로 들어 이론을 설명함으로써 독자의 이해를 돕고 있다. 이는 아티클의 큰 장점이라고 생각한다.

### 마이크로서비스와 CAP 이론

리뷰하는 아티클의 마지막 부분에서는 마이크로서비스 아키텍처에서 CAP 이론의 중요성을 강조하고 있다. 마이크로서비스는 각각 자체 데이터베이스를 가지고 네트워크를 통해 통신하는 독립적인 컴포넌트들로 구성되어 있다. 따라서 분산 시스템의 특성을 가지며, 적절한 데이터베이스 선택이 중요하다.

예를 들어, 데이터 모델을 빠르게 반복하고 수평적으로 확장해야 하는 경우에는 Cassandra와 같은 AP 데이터베이스가 적합할 수 있다. 반면, 이커머스 애플리케이션이나 결제 서비스처럼 데이터 일관성이 중요한 경우에는 PostgreSQL과 같은 관계형 데이터베이스가 더 적합할 수 있다.

이 부분은 아티클의 이론적 내용을 실제 시스템 설계에 적용하는 방법을 제시하고 있어, 이론과 실무를 연결하는 좋은 예시라고 생각한다.

## 아티클에 대한 개인적인 공감 포인트

1. **트레이드오프 인식의 중요성**: 이 아티클에서 강조하는 CAP 이론의 트레이드오프는 소프트웨어 개발의 많은 영역에서 발견된다. 내가 프로젝트를 진행할 때도 개발 속도, 코드 품질, 확장성 등 여러 요소 간의 트레이드오프를 고려해야 했다. 모든 것을 동시에 최적화할 수 없다는 사실을 인정하고, 상황에 맞는 최선의 선택을 하는 것이 중요하다는 아티클의 관점에 깊이 공감했다.

2. **MongoDB 경험과의 연결**: 최근 진행한 프로젝트에서 MongoDB를 사용했는데, 당시에는 CAP 이론 관점에서 깊이 생각해보지 않았다. 이 아티클을 리뷰하면서 MongoDB가 CP 시스템으로 설계된 이유와 그 작동 방식을 더 명확하게 이해하게 되었다. 특히 프라이머리 노드 선출 과정에서 경험했던 일시적인 쓰기 불가 상황이 CAP 이론의 관점에서는 자연스러운 현상임을 깨달았다.

3. **데이터베이스 선택 기준**: 프로젝트를 시작할 때 데이터베이스를 선택하는 기준으로 주로 친숙도, 생태계, 개발 편의성 등을 고려했었다. 하지만 이 아티클을 리뷰하면서 CAP 이론에 기반한 데이터베이스의 특성을 이해하고, 애플리케이션의 요구사항에 맞게 선택하는 것이 얼마나 중요한지 새롭게 인식하게 되었다. 특히 마이크로서비스 아키텍처에서는 각 서비스의 특성에 맞는 데이터베이스를 선택할 수 있다는 점이 큰 장점이라는 아티클의 견해에 동의한다.

4. **일관성과 가용성 사이의 균형**: 개인적으로 진행했던 프로젝트들은 대부분 일관성을 우선시했다. 하지만 이 아티클을 리뷰하면서, 대규모 분산 시스템에서는 상황에 따라 가용성이 더 중요할 수 있다는 점을 깨달았다. 예를 들어, 소셜 미디어 플랫폼에서는 사용자 경험을 위해 일시적인 데이터 불일치보다 서비스 가용성이 더 중요할 수 있다는 아티클의 관점은 새로운 시각을 제공해주었다.

## 아티클 내용의 실제 프로젝트 적용 관점

이 아티클을 리뷰하면서 최근 참여한 마이크로서비스 기반 프로젝트에서 데이터베이스 선택이 얼마나 중요한 결정이었는지 다시 한번 깨달았다. 우리 팀은 주로 MongoDB를 사용했는데, 이제 보니 이는 데이터 일관성을 우선시하는 선택이었다.

특히 인상 깊었던 부분은 아티클에서 언급한 것처럼, 이커머스나 결제 서비스와 같이 데이터 일관성이 중요한 서비스에는 CP 데이터베이스가 적합하다는 점이다. 우리 프로젝트는 금융 관련 데이터를 다루는 부분이 있어 MongoDB의 트랜잭션 기능과 일관성을 활용했는데, 이 선택이 CAP 이론 관점에서도 타당했다는 것을 확인할 수 있었다.

반면, 사용자 활동 로그나 분석 데이터와 같이 일시적인 불일치가 크게 문제되지 않는 데이터는 Cassandra와 같은 AP 데이터베이스를 고려해볼 수 있을 것이다. 이는 부하가 많은 상황에서도 뛰어난 확장성과 가용성을 제공할 수 있기 때문이다.

아티클에서 제시한 것처럼, 앞으로 마이크로서비스 아키텍처를 설계할 때는 각 서비스의 특성과 요구사항에 맞게 CP와 AP 데이터베이스를 선택적으로 조합하는 방안을 적극적으로 고려해봐야겠다.

## 아티클의 핵심 내용 요약

* **CAP 이론의 근본적인 제약**: 아티클에서 설명하는 바와 같이, 분산 시스템은 일관성(C), 가용성(A), 분할 허용성(P) 중 세 가지를 동시에 모두 만족시킬 수 없으며, 최대 두 가지만 제공할 수 있다. 실제 분산 환경에서는 네트워크 분할이 불가피하므로, 결국 일관성과 가용성 중 하나를 선택해야 한다.

* **데이터베이스 유형별 특성**: 아티클은 MongoDB와 같은 CP 데이터베이스는 일관성을 위해 가용성을 희생하는 반면, Cassandra와 같은 AP 데이터베이스는 가용성을 위해 엄격한 일관성을 희생한다고 설명한다. 이론상 CA 데이터베이스도 존재하지만, 실제 분산 환경에서는 네트워크 분할을 피할 수 없기 때문에 현실적으로 구현이 불가능하다는 점을 명확히 지적한다.

* **애플리케이션 요구사항에 따른 선택**: 아티클에서 강조하는 것처럼, 데이터베이스 선택은 애플리케이션의 요구사항에 맞게 이루어져야 한다. 데이터 모델의 빠른 반복과 수평적 확장성이 중요한 경우 AP 데이터베이스가 적합하고, 데이터 일관성이 중요한 이커머스나 결제 서비스에는 CP 데이터베이스나 관계형 데이터베이스가 더 적합할 수 있다.

## 아티클 리뷰 결론

IBM의 "What is the CAP theorem?" 아티클은 분산 시스템 설계에 있어 근본적인 제약을 명확하게 보여주는 중요한 개념을 매우 이해하기 쉽게 설명하고 있다. 이 아티클을 리뷰하면서 모든 것을 동시에 최적화할 수 없다는 현실적인 한계를 인정하고, 상황에 맞는 최선의 선택을 하는 것의 중요성을 깊이 이해하게 되었다.

특히 아티클에서 제시하는 MongoDB와 Cassandra의 구체적인 예시를 통해 CAP 이론이 실제 데이터베이스 시스템에 어떻게 적용되는지 명확하게 이해할 수 있었다. 이러한 이해는 앞으로 프로젝트에서 데이터베이스를 선택할 때 더 명확한 기준을 제시해줄 것이다.

클라우드 환경과 마이크로서비스 아키텍처가 점점 더 보편화되는 현재, CAP 이론에 대한 이해는 모든 개발자에게 필수적인 지식이 되어가고 있다. 이 아티클은 일관성, 가용성, 분할 허용성 사이의 트레이드오프를 이해하고 각 상황에 맞는 적절한 선택을 하는 것이 성공적인 분산 시스템 설계의 핵심임을 다시 한번 깨닫게 해주는 유익한 글이었다. 아티클이 제시하는 실용적인 가이드라인은 특히 분산 시스템을 설계하는 개발자에게 큰 도움이 될 것이라고 생각한다. 