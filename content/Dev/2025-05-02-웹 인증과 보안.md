---
layout: post
title: "웹 인증과 보안"
date: 2025-05-02
categories: [Web, Security]
tags: [authentication, authorization, oauth, security, csrf, xss, nextauth]
---

# 웹 인증과 보안 완벽 가이드

## 1. 인증과 인가의 기본 개념

### 인증(Authentication)과 인가(Authorization)의 차이

인증과 인가는 웹 보안의 핵심 개념이지만 종종 혼동되곤 합니다.

- **인증(Authentication)**: "당신이 누구인지" 확인하는 과정입니다. 사용자의 신원을 검증합니다.
- **인가(Authorization)**: "당신이 무엇을 할 수 있는지" 결정하는 과정입니다. 인증된 사용자에게 특정 리소스나 기능에 대한 접근 권한을 부여합니다.

간단한 예로, 건물에 들어갈 때 ID 카드로 자신을 확인하는 것은 '인증'이고, 그 ID 카드가 특정 층이나 방에 접근할 수 있는 권한을 결정하는 것은 '인가'입니다.

### 인증의 종류

1. **지식 기반 인증**: 사용자가 알고 있는 것 (비밀번호, PIN, 보안 질문)
2. **소유 기반 인증**: 사용자가 가지고 있는 것 (스마트폰, 보안 토큰, 스마트카드)
3. **생체 기반 인증**: 사용자 자체의 특성 (지문, 얼굴 인식, 홍채 스캔)
4. **다중 요소 인증(MFA)**: 두 가지 이상의 인증 방식을 조합

### 권한 관리 모델

1. **역할 기반 접근 제어(RBAC)**: 사용자 역할에 따라 권한 부여
2. **속성 기반 접근 제어(ABAC)**: 사용자, 리소스, 환경 속성에 따라 권한 부여
3. **정책 기반 접근 제어**: 중앙 집중식 정책에 따라 권한 부여
4. **관계 기반 접근 제어(ReBAC)**: 사용자 간의 관계에 따라 권한 부여

## 2. 웹 인증 메커니즘

### 세션 기반 인증

세션 기반 인증은 서버에서 상태를 유지하는 전통적인 인증 방식입니다.

1. 사용자가 로그인하면 서버는 세션 ID를 생성
2. 이 세션 ID는 쿠키에 저장되어 클라이언트에 전송
3. 이후 요청마다 쿠키와 함께 세션 ID 전송
4. 서버는 세션 ID를 검증하고 사용자 식별

**장점**:
- 구현 간단
- 세션 데이터는 서버에 안전하게 보관

**단점**:
- 확장성 문제 (서버 간 세션 공유 필요)
- CSRF 공격에 취약할 수 있음

### 토큰 기반 인증 (JWT)

JWT(JSON Web Token)는 상태를 유지하지 않는(stateless) 인증 방식입니다.

1. 사용자 로그인 시 서버는 JWT 생성 (헤더, 페이로드, 서명)
2. 토큰은 클라이언트에 반환되어 저장
3. 이후 요청마다 토큰을 헤더에 포함
4. 서버는 토큰의 유효성을 검증
